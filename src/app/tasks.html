<div class="tasks-page">
  <h1 class="keep">Task <span class="strong">Manager</span></h1>

  <div class="task-stats">
    <div class="stat-card">
      <i class="fa-solid fa-list-check"></i>
      <div>
        <h3>{{tasks.length}}</h3>
        <p>Total Tasks</p>
      </div>
    </div>
    <div class="stat-card">
      <i class="fa-solid fa-check-circle"></i>
      <div>
        <h3>{{(tasks | filter:{completed:true}).length}}</h3>
        <p>Completed</p>
      </div>
    </div>
    <div class="stat-card">
      <i class="fa-solid fa-clock"></i>
      <div>
        <h3>{{(tasks | filter:{completed:false}).length}}</h3>
        <p>Pending</p>
      </div>
    </div>
    <div class="stat-card">
      <i class="fa-solid fa-percentage"></i>
      <div>
        <h3>{{getCompletionRate()}}%</h3>
        <p>Completion Rate</p>
      </div>
    </div>
  </div>

  <div class="add-task-section">
    <h2>Add New Task</h2>
    <div class="task-input-group">
      <input 
        type="text" 
        ng-model="newTask" 
        placeholder="Enter task description..."
        ng-keyup="$event.keyCode == 13 && addTask()"
        class="task-input"
      >
      <select ng-model="newPriority" class="priority-select">
        <option value="low">Low Priority</option>
        <option value="medium">Medium Priority</option>
        <option value="high">High Priority</option>
      </select>
      <button ng-click="addTask()" class="add-btn">
        <i class="fa-solid fa-plus"></i> Add Task
      </button>
    </div>
  </div>

  <div class="tasks-list">
    <h2>Your Tasks</h2>
    <div class="task-item" ng-repeat="task in tasks" ng-class="{'completed': task.completed, 'priority-high': task.priority === 'high', 'priority-medium': task.priority === 'medium', 'priority-low': task.priority === 'low'}">
      <div class="task-content">
        <input 
          type="checkbox" 
          ng-model="task.completed" 
          ng-change="toggleTask(task)"
          id="task-{{task.id}}"
        >
        <label for="task-{{task.id}}">
          <span class="task-title">{{task.title}}</span>
          <span class="task-priority">{{task.priority}}</span>
        </label>
      </div>
      <button ng-click="deleteTask(task.id)" class="delete-btn">
        <i class="fa-solid fa-trash"></i>
      </button>
    </div>
    <div ng-if="tasks.length === 0" class="empty-state">
      <i class="fa-regular fa-clipboard"></i>
      <p>No tasks yet. Add your first task above!</p>
    </div>
  </div>
</div>
